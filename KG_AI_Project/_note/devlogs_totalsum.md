# devlog_2025-06-27
## 1. 시작

### 프로젝트 솔플 시작

- 5조 1인팀 최종 결성
- 프로젝트 명 - '학습환경 격차 분석을 통한 인프라 균형화'
- 영문명 - Project 'Libra'
- 연도별 각 대학의 대학도서관 데이터 수집 시작 

## 2. 개발방향 연구

### 요구사항 분석서 초안 작성

- 제시된 가이드라인에 맞춰 작성 시작
- 워드로 작업
- 초안만 구성

----------------------------------------------------

# devlog_2025-06-30
## 1. 데이터 수집

### 대학도서관 관련 데이터

- 학술정보통계시스템 사이트 - http://www.rinfo.kr/
- 수집 연도 설정 - 2014 ~ 2024년도
- 수집 데이터셋 종류 - 5종 - 프로젝트 노트에서 확인가능
- 저장경로 - project\KG_AI_Project\resource\raw_files

## 2. 전처리 방향성 연구

### 데이터 확인 및 컬럼구조 파악

- xls 파일형식 - xlsx로 변환 필요
- 컬럼구조 - 병합셀의 헤더 - 헤더 구조로 인해 전처리 필요
- 연도 별 데이터셋 - 헤더명 또는 컬럼구조가 변경되었거나 삭제된 열 확인


## 3. xlsx -> csv 변환 시도
### 문제발생

- 5개 종류의 엑셀파일을 csv로 변환 시도
- 컬럼의 병합셀때문에 문제 발생
- 좀 더 리펙터링 된 코드 개발 목표 설정 준비

----------------------------------------------------

# devlog_2025-07-01

## 1. 데이터 분석 및 방향성 정리
###  분석

- 수집된 데이터 전처리 과정 시작
- 전처리 작업은 파이썬 패키지로 제작
- 컬럼 재정렬 로직 구상
- 일단 xls 파일을 최신 엑셀파일형식인 xlsx로 변환 필요
- 공통컬럼이 존재함 (번호,학교명,학교유형,설립,지역,대학규모)
- 특정 파일은 하나의 시트에 모든 연도의 데이터가 병합되어 있음 (2.시설)
- 하나의 파일에 시트 별로 연도별 데이터가 들어가 있음

## 2. 전처리 구상

### 방법 연구 및 계획 수립

- 데이터행 단위로 셀을 읽어 컬럼명을 헤더 병합식으로 구상
- ex) 헤더명 : '시설-설비-업무용 컴퓨터(PC)수'
- 연도별로 데이터를 분할하는 방식 이용
- 전처리 후 csv파일 형식의 데이터시트로 변환
- Oracle DB와 연동 후 테이블링 작업 고려

----------------------------------------------------

# devlog_2025-07-02

## 1. csv파일 변환_1

### ExcelToCSVConverter_ver1

- 데이터 핸들링을 위한 파이썬코드 작업
- ExcelToCSVConverter.py 클래스 개발 시작
- 컬럼명을 임의의 컬럼명으로 변경 (헤더-헤더-헤더 구조)
- 공통컬럼 구분 (번호,학교명,학교유형,설립,지역,대학규모)
- 연도별로 나뉜 시트를 개별파일로 나누기
- 데이터열 제일 앞에 연도 컬럼 추가
- 저장될 파일명은 NumXX_주제별이름_XXXX.csv로 지정

## 2. csv파일 변환_2

### ExcelToCSVConverter_ver2

- 데이터 중 특정 데이터는 연도별 데이터가 시트로 안나뉘어 있음
- 하나의 시트에 모든 데이터가 행방향 병합되어 있음
- 연도별로 끊어 각각의 연도별 csv 파일 제작
- 그 외적으로는 ver1과 동일 로직으로 변환 시도

## 3. 헤더 매핑구조 초안 제작

### 헤더 수집

- 컬럼에 존재하는 헤더가 너무 김
- 영어로 변환하여 길이를 줄이는 방향 수립
- 모든 파일에서 특정 행에 존재하는 헤더들을 모두 수집
- 수집 후 유일한 헤더만 골라 출력하는 코드 제작

### 헤더 영문변환

- 수집된 헤더를 각각 영단어로 짧게 매핑
- 컬럼행에 존재하는 모든 헤더를 매핑표에 맞게 변환 코드 제작

----------------------------------------------------

# devlog_2025-07-03

## 1. DB 선행 작업

### Oracle DB

- 프로젝트에 사용할 오라클 sql 계정 및 테이블스페이스 생성
- 프로젝트 폴더 내부에 전용 폴더 db 생성
- 전용 경로에 작업 시작

## 2. 컬럼명 길이 제한

- 컬럼명의 헤더를 영단어로 교체해도 컬럼명이 너무 김
- 오라클 sqldeveloper에서 테이블 생성 시 컬럼이름 30byte 제한 인지
- 영단어가 아닌 이니셜 약어로 매핑 대체
- ex)
        "국내": "KR",
        "국내서": "KB",
        "국외": "OT",

## 3. 타겟값 수집

- 대학도서관 데이터는 피쳐값이 될 예정
- 타겟값으로 대학 평가지수가 필요해짐
- 1차적으로 세계대학평가 사이트 중 CWUR 사이트의 점수를 발견
- 크롤링을 위한 파이썬 클래스 제작
- csv파일로 저장

## 4. 영문 대학명 수집

- 크롤링된 데이터에는 대학명이 영문명으로 존재
- 파이썬 코드를 이용, 고유한 대학명 수집

## 5. 대학명 매핑표 제작

- 수집된 영문명과 데이터셋에 존재하는 한글명이랑 매핑표 제작

## 6. 테이블 생성

- Oracle DB에 전처리된 데이터 1차 테이블 생성 시작

## 7. 모든 코드 클래스화 & 패키지 묶기

- xlsx -> DB 테이블까지의 모든 작업에 필요한 코드들 클래스 분화
- 패키지 실행 1번으로 모든 작업이 되게 DataHandling 패키지화

----------------------------------------------------

# devlog_2025-07-04

## 1. 피쳐 선정

- 환경점수 예측에 상관계수를 가질 것으로 예측되는 컬럼 추측
- 프로젝트 노트에서 피쳐 확인 가능

## 2. 패키지 생성

- DB에 존재하는 테이블들을 핸들링하는 DBHandling 기획
- 모든 DB테이블을 가지고 전처리 진행을 하는 파이썬 클래스 제작

## 3. 테이블 전처리

- 5종류의 데이터의 컬럼 정리
- 연도별로 컬럼명이 변경되거나 추가&삭제되는 패턴 확인
- 모든 연도별로 컬럼 수 획일화
- 대학 별 모든 5종류의 데이터가 직렬병합된 종합데이터 테이블 생성(Num06_)

## 4. 필터링

- 초안으로 환경점수를 예측할 수 있는 후보군 컬럼 제외 모든 데이터 드랍 준비

----------------------------------------------------

# devlog_2025-07-07

## 1. 리펙터링

- 모든 파이썬 패키지 리펙터링 작업 시작
- core_utiles 패키지 추가 생성
- 공통기능 메서드 추출 및 모듈화
- 저장 파일경로 및 오라클계정 등 설정값 .env파일화
- config_loader를 이용한 유연한 구조 재설계
- 패키지 구동에 필요한 라이브러리 정리, requironment.txt 제작

----------------------------------------------------

# devlog_2025-07-08

## 1. 리펙터링

- 매퍼 클래스 매핑모듈화
- 매핑표가 담긴 모듈을 이용해서 데이터 전치리가 작동하게 리펙터링

## 2. 피쳐&타깃 테이블링 클래스 제작

- 타깃값인 CWUR 점수가 있는 테이블과 필터링 데이터 대조
- 점수가 있는 대학만 종합데이터 직렬 병합
- 피쳐후보군 제외 모든 데이터 드랍
- 컬럼갯수 동일 확인 후 연도별 데이터 하나의 테이블로 병렬 병합
- 필터링데이터 테이블 생성

## 3. 초기 머신러닝 모델 초안 제작

- 총 20개의 피쳐로 환경점수를 예측하는 모델 구상
- 'Random Forest Regressor' 모델 선정
- ML_RFR 패키지 생성
- 각 기능 별 클래스 분화
	- cleaner, config, controller, fetcher, model, predictor, trainer + utiles
- 초기모델 model_RFR_v1.0.pkl 제작
- 학습 후 필터링 데이터 예측 시작
- RMSE값 7점대로 문제 발생 - 보완 필요
- 예측된 값을 이용한 평가데이터 DB 테이블 생성 EstimationFlow 패키지 제작

## 4. 2번째 머신러닝 모델 초안 제작

- 첫번째 모델을 이용한 점수예측 후 점수추이를 통한 미래점수 예측모델 구상
- 'XGBoot' 모델 선정
- ML_XGB 패키지 생성
- RFR 모델과 같이 클래스 분화 및 초기모델 생성
- 초기모델 구성으로 작업종료

----------------------------------------------------

# devlog_2025-07-09

## 1. 미래점수 예측 시도

- 제작된 1,2번 프로토타입 패키지로 점수를 예측
- 예측된 점수를 DB 테이블 생성 로직 EstimationFuture 패키지 제작


### 2. 하이퍼 파라미터 삽입

- RFR 초기모델에 하이퍼파라미터 삽입로직이 없었음
- 추가로 제작

## 3. 리펙터링

- RFR 패키지 내부 클래스별 의존성 부분 획일화 리펙터링 시작
- 유틸 모듈을 이용하여 DB 접속 및 컨트롤러와 각종 클래스 간 의존성 재정립
- 기존 RMSE값만 출력되는 부분을 MAE, R2값까지 동시출력하게 변경
- 여전히 출력점수 상 성능이슈가 있음 - 보완 필요

## 4. UI 제작

- 초기모델로 예측한 점수들을 csv로 익스포트, 파일을 읽어 차팅을 구상
- HTML & CSS & JS 로 초기 웹페이지 제작
- chartjs를 이용하여 페이지에 예측된 데이터를 차트로 출력기능 구현

----------------------------------------------------

# devlog_2025-07-10

## 1. 리펙터링

- 테이블 컬럼명이 이니셜 약자로 되어있어 가독성 저하 야기
- 매퍼 모듈에 리버스 매퍼 메서드 추가

## 2. \_ToolBox 추가

- 특정 csv파일의 컬럼에 존재하는 헤더를 한글->영문, 영문->한글 변환 툴 제작
- 컬럼을 한글헤더(영문헤더) 로 변환해주는 툴 제작
- 오라클 테이블을 matplotlib & seaborn을 이용한 차팅 시각화 툴 제작

----------------------------------------------------

# devlog_2025-07-11

## 1. 차트 웹페이지 수정

- 기존에 만든 메인페이지&차트페이지 수정

## 2. 중간보고

- 지금까지의 과정 정리 후 중간보고

----------------------------------------------------

# devlog_2025-07-12

## 1. RFR 모델 로직 수정

- 스케일링 기능 추가
- 클러스터링 기능 추가
- cleaner 외로 handler 클래스 추가, 스케일링 클러스터링 구현
- config에 클러스터 갯수 및 개별 하이퍼파라미터 수정 로직 추가
- full 모델과 클러스터 모델 별 훈련 및 예측점수 개별 출력기능 추가

----------------------------------------------------

# devlog_2025-07-14

## 1. 머신러닝 모델 재차 수정

- 하이퍼 파라미터 수동 튜닝 - 최적값 찾는데 이슈 발생
- 튜너 패키지 초안 제작 시작
- 로직 구상 중

----------------------------------------------------

# devlog_2025-07-15

## 1. 튜너 재구성

- Tuner_RFR 로직 구상 및 제작
- ML_RFR/config.py 클래스를 .json으로 데이터파일화
- 튜너에서 config.json의 하이퍼 파라미터를 랜덤으로 수정하게 로직 구상
- 수정된 config값을 이용해 ML_RFR 패키지 실행, 로그 추출
- 패키지 실행으로 생성된 full & 클러스터모델로 예측 시작
- 예측된 CWUR 점수와 실제 CWUR 점수 비교
- 오차값 출력, 로그에 저장
- 로그에 기록된 점수 중 최상치를 따로 저장하는 ranker 클래스 추가
- 사이클 반복

## 2. 리펙터링

- ML_RFR/config에 스케일러, 클러스터 on/off기능 추가
- 저장되는 모델들의 피클파일 파일명 지정기능 추가 - 버전 입력 가능
- 그 값에 따라 트레이너 로직 변경
- 튜너의 파라미터 랜덤생성로직 수정
- 하이퍼 파라미터가 n개일 때 n개의 하이퍼 파라미터셋 출력되게 변경
- serchspace.json 추가 - 랜덤 생성될 하이퍼파라미터 범위 조절 기능 추가
- 오차점수 + 예측값과 실제값의 표준편차 계산로직 추가
- toprating 하이퍼 파라미터값 정렬에 표준편차 기준 추가

## 3. 파이썬 패키지 익스포트

- 반복튜닝 작업을 위한 패키지 외부 익스포트 작업 수행
- win10 환경의 pc에 워크스페이스 이식
- 반복튜닝을 통해 낮은 오차율 & 표준편차가 나오는 하이퍼파라미터값 추출
- 아직은 R2 - 0.8점대, 표준편차 연도별 평균 90등 나옴 - 수정필요
- 외부 PC에서의 R2값과 메인PC에서의 R2값이 다르게 출력되는 이슈 발생
- 원인 불명 - 코드에는 문제 없을 것으로 추정됨
- os버전 + 라이브러리 & 파이썬 버전이 미묘하게 다름을 확인 - 조사 필요

----------------------------------------------------

# devlog_2025-07-16

## 1. UI 수정

- 1차 프로젝트 중간발표일에 맞춰 UI 수정 계획 수립
- 웹페이지에 연도별 예측된 환경점수 차트로 출력
- 필터기능 추가 - 연도별, 데이터 수, 컬럼 별 필터 생성
- 미래점수 예측값 차트 페이지 추가
- 연도 범주 & 출력 데이터수 필터링 후 선형 그래프 출력페이지 제작
- 연간 점수 추이값을 통한 도넛그래프 출력기능 추가
- 필터 기능 세분화 작업

----------------------------------------------------

